name: one-shot
version: "1.0"
description: Complete a single task from start to finish with PR

settings:
  max-retry: 3
  timeout-minutes: 60
  track-progress: true
  git:
    enabled: true
    worktree: true
    auto-commit: true
    branch-prefix: "agentic"

variables:
  - name: task
    type: string
    required: true
    description: Task description or prompt
  - name: create_pr
    type: boolean
    required: false
    default: true
    description: Whether to create a PR

steps:
  - name: execute-task
    type: prompt
    prompt: |
      Complete the following task:

      {{ variables.task }}

      Guidelines:
      - Analyze the codebase to understand context
      - Make necessary changes following project conventions
      - Write tests for new functionality
      - Commit changes with clear messages
    model: sonnet

  - name: review
    type: prompt
    prompt: /review "" major

  - name: create-pr
    type: conditional
    condition: "variables.create_pr"
    then:
      - name: open-pr
        type: prompt
        prompt: /git-pr
